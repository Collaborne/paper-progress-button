<!doctype html>
<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-spinner/paper-spinner-lite.html">

<!--
A paper button gets disabled and shows a spinner while submitting

@demo demo/index.html
-->
<dom-module id="paper-progress-button">

	<template>
		<style>
			:host {
				display: inline-block;
			}

			.button {
				@apply --paper-progress-button-button;
			}

			.button:not([disabled]) {
				@apply --paper-progress-button-button-active;
			}

			.spinner {
				margin-left: 10px;
				@apply --paper-progress-button-spinner;
			}

			[hidden] {
				display: none;
			}
		</style>

		<paper-button raised disabled="[[_computedButtonDisabled(disabled, active)]]" on-tap="_onTap" class="button">
			[[_computeText(active, activeText, inactiveText)]]
			<paper-spinner-lite hidden$="[[active]]" active="[[!active]]" class="spinner"></paper-spinner-lite>
		</paper-button>
	</template>

	<script>

		class PaperProgressButton extends Polymer.Element {

			static get is() {
				return 'paper-progress-button';
			}

			static get properties() {
				return {
					/** True if the button is active, e.g. not submitting */
					active: {
						type: Boolean,
						value: true,
					},
					/** True if the button can't be pressed */
					disabled: {
						type: Boolean,
						value: false,
					},
					/** Text shown while the button is active, e.g. "Submit" */
					activeText: String,
					/** Text shown while the button is inactive, e.g. "Submitting..." */
					inactiveText: String,
				};
			}

			_computeText(active, activeText, inactiveText) {
				return active ? activeText : inactiveText;
			}

			_onTap(e) {
				this.dispatchEvent(new CustomEvent('pressed'));
			}

			_computedButtonDisabled(disabled, active) {
				return disabled || !active;
			}

		}
		customElements.define(PaperProgressButton.is, PaperProgressButton);

	</script>

</dom-module>
